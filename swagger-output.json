{
  "swagger": "2.0",
  "info": {
    "title": "SuperHandy 超人幫手",
    "description": "This is the final project for a Node.js course.",
    "version": "1.0.0"
  },
  "host": "localhost:3000",
  "basePath": "/",
  "tags": [
    {
      "name": "Home",
      "description": "首頁"
    },
    {
      "name": "Find-tasks",
      "description": "找任務"
    },
    {
      "name": "Posts",
      "description": "刊登任務"
    },
    {
      "name": "Account",
      "description": "我的帳號"
    },
    {
      "name": "Sign-in",
      "description": "登入相關"
    },
    {
      "name": "Tasks",
      "description": "任務管理"
    },
    {
      "name": "Notifications",
      "description": "系統通知"
    },
    {
      "name": "Chat",
      "description": "聊天室"
    },
    {
      "name": "Money",
      "description": "金流相關"
    },
    {
      "name": "General",
      "description": "通用"
    },
    {
      "name": "NotFound",
      "description": "頁面路由相關"
    }
  ],
  "schemes": [
    "http",
    "https"
  ],
  "securityDefinitions": {
    "Bearer": {
      "type": "apiKey",
      "in": "header",
      "name": "Authorization",
      "description": "JWT Token"
    }
  },
  "paths": {
    "/sign-up": {
      "post": {
        "tags": [
          "Sign-in"
        ],
        "summary": "Register an Account and send a verification email",
        "description": "",nickname
        "parameters": [
          {
            "name": "parameter_name",
            "in": "body",
            "description": "nickName is optional, while all the others are required.",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string",
                  "example": "test@gmail.com"
                },
                "phone": {
                  "type": "string",
                  "example": "0912345678"
                },
                "firstName": {
                  "type": "string",
                  "example": "Ho"
                },nickname
                "lastName": {
                  "type": "string",
                  "example": "Erik"
                },
                "nickName": {
                  "type": "string",
                  "example": "Erik"
                },
                "password": {
                  "type": "string",
                  "example": "a1234567"
                },
                "confirmPassword": {
                  "type": "string",
                  "example": "a1234567"
                }
              },
              "required": [
                "email",
                "phone",
                "firstName",
                "lastName",
                "password"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "註冊成功",
            "schema": {
              "$ref": "#/definitions/RegisterEmailSuccess"
            }
          },
          "400": {
            "description": "註冊失敗",
            "schema": {
              "$ref": "#/definitions/RegisterEmailError"
            }
          },
          "404": {
            "description": "無此路由",
            "schema": {
              "$ref": "#/definitions/Error404"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        }
      }
    },
    "/verify-email": {
      "get": {
        "tags": [
          "Sign-in"
        ],
        "summary": "Verify the registration email",
        "description": "",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "驗證成功"
          },
          "400": {
            "description": "驗證失敗",
            "schema": {
              "$ref": "#/definitions/ValidateEmailError"
            }
          },
          "404": {
            "description": "無此路由",
            "schema": {
              "$ref": "#/definitions/Error404"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        },
        "security": [
          {
            "Bearer": []
          }
        ]
      }
    },
    "/resend-verification": {
      "post": {
        "tags": [
          "Sign-in"
        ],
        "summary": "Resend an Email for verification",
        "description": "",
        "parameters": [
          {
            "name": "parameter_name",
            "in": "body",
            "description": "No matter what email is received, a reply will be sent indicating that the email has been sent.",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string",
                  "example": "test@gmail.com"
                }
              },
              "required": [
                "email"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "信件已寄出"
          },
          "400": {
            "description": "信件已寄出"
          },
          "404": {
            "description": "無此路由",
            "schema": {
              "$ref": "#/definitions/Error404"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        }
      }
    },
    "/sign-in": {
      "post": {
        "tags": [
          "Sign-in"
        ],
        "summary": "Login an Account",
        "description": "",
        "parameters": [
          {
            "name": "parameter_name",
            "in": "body",
            "description": "sign in an account",
            "schema": {
              "type": "object",
              "properties": {
                "account": {
                  "type": "string",
                  "example": "test@gmail.com"
                },
                "password": {
                  "type": "string",
                  "example": "a1234567"
                }
              },
              "required": [
                "account",
                "password"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "登入成功",
            "schema": {
              "$ref": "#/definitions/Sign"
            }
          },
          "400": {
            "description": "登入失敗",
            "schema": {
              "$ref": "#/definitions/Error400"
            }
          },
          "404": {
            "description": "無此路由",
            "schema": {
              "$ref": "#/definitions/Error404"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        }
      }
    },
    "/forgot-password": {
      "post": {
        "tags": [
          "Sign-in"
        ],
        "summary": "forgot password and send an Email for verification",
        "description": "",
        "parameters": [
          {
            "name": "parameter_name",
            "in": "body",
            "description": "forgot password and send an Email for verification",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string",
                  "example": "test@gmail.com"
                }
              },
              "required": [
                "email"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "信件已寄出"
          },
          "400": {
            "description": "信件已寄出"
          },
          "404": {
            "description": "無此路由",
            "schema": {
              "$ref": "#/definitions/Error404"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        }
      }
    },
    "/forgot-reset-password": {
      "patch": {
        "tags": [
          "Sign-in"
        ],
        "summary": "forget password and reset the password from email",
        "description": "",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "parameter_name",
            "in": "body",
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "password": {
                  "type": "string",
                  "example": "a1234567"
                },
                "confirmPassword": {
                  "type": "string",
                  "example": "a1234567"
                }
              },
              "required": [
                "password",
                "confirmPassword"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "重設成功"
          },
          "400": {
            "description": "重設失敗"
          },
          "404": {
            "description": "無此路由",
            "schema": {
              "$ref": "#/definitions/Error404"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        },
        "security": [
          {
            "Bearer": []
          }
        ]
      }
    },
    "/update-password": {
      "patch": {
        "tags": [
          "Sign-in"
        ],
        "summary": "update password after sign in",
        "description": "",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "parameter_name",
            "in": "body",
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "password": {
                  "type": "string",
                  "example": "a12345678"
                },
                "confirmPassword": {
                  "type": "string",
                  "example": "a12345678"
                },
                "oldPassword": {
                  "type": "string",
                  "example": "a1234567"
                }
              },
              "required": [
                "password",
                "confirmPassword",
                "oldPassword"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "重設成功"
          },
          "400": {
            "description": "重設失敗"
          },
          "404": {
            "description": "無此路由",
            "schema": {
              "$ref": "#/definitions/Error404"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        },
        "security": [
          {
            "Bearer": []
          }
        ]
      }
    },
    "/account/profile": {
      "get": {
        "tags": [
          "Account"
        ],
        "summary": "取得使用者資料概要",
        "description": "",
        "parameters": [
          {
            "name": "uid",
            "in": "query",
            "description": "[dev]如果沒有token，可以用uid取得資料",
            "schema": {
              "type": "object",
              "properties": {
                "uid": {
                  "type": "string",
                  "example": "64469189880b866621b40eeb"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "firstName": {
                  "type": "string",
                  "example": "John"
                },
                "lastName": {
                  "type": "string",
                  "example": "Doe"
                },
                "email": {
                  "type": "string",
                  "example": "abc123@gmail.com"
                },
                "avatarPath": {
                  "type": "string",
                  "example": "http://"
                }
              },
              "xml": {
                "name": "main"nickname
              }
            }
          }
        },
        "security": [
          {
            "jwt": []
          }
        ]
      }
    },
    "/account/info-form": {
      "get": {
        "tags": [
          "Account"
        ],
        "summary": "取得使用者表單資料",
        "description": "",
        "parameters": [
          {
            "name": "uid",
            "in": "query",
            "description": "[dev]如果沒有token，可以用uid取得資料",
            "schema": {
              "type": "object",
              "properties": {
                "uid": {
                  "type": "string",
                  "example": "64469189880b866621b40eeb"
                }
              }
            }
          }
        ],
        "responses": {},
        "security": [
          {
            "jwt": []
          }
        ]
      },
      "patch": {
        "tags": [
          "Account"
        ],
        "summary": "更新使用者表單資料",
        "description": "",
        "parameters": [
          {
            "name": "uid",
            "in": "query",
            "description": "[dev]如果沒有token，可以用uid取得資料",
            "schema": {
              "type": "object",
              "properties": {
                "uid": {
                  "type": "string",
                  "example": "64469189880b866621b40eeb"
                }
              }
            }
          }
        ],
        "responses": {},
        "security": [
          {
            "jwt": []
          }
        ]
      }
    },
    "/account/testSignup": {
      "post": {
        "tags": [
          "Dev"
        ],
        "summary": "dev 註冊user帳號",
        "description": "",
        "parameters": [
          {
            "name": "parameter_name",
            "in": "body",nickname
            "description": "nickName is optional, while all the others are required.",
            "schema": {
              "type": "object",
              "properties": {
                "account": {
                  "type": "string",
                  "example": "test@gmail.com"
                },
                "password": {
                  "type": "string",
                  "example": "a1234567"
                }
              },
              "required": [
                "account",
                "password"
              ]
            }
          }
        ],
        "responses": {}
      }
    },
    "/account/testFindAllUser": {
      "get": {
        "tags": [
          "Dev"
        ],
        "summary": "dev 取得所有user帳號",
        "description": "",
        "parameters": [],
        "responses": {}
      }
    },
    "/home/completed-cases": {
      "get": {
        "tags": [
          "Home"
        ],
        "summary": "Get Completed Cases",
        "description": "",
        "parameters": [],
        "responses": {
          "200": {
            "description": "取得成功",
            "schema": {
              "$ref": "#/definitions/getCompletedCasesSuccess"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        }
      }nickname
    },
    "/home/completed-reviews": {
      "get": {
        "tags": [
          "Home"
        ],
        "summary": "Get Completed Reviews",
        "description": "",
        "parameters": [],
        "responses": {
          "200": {
            "description": "取得成功",
            "schema": {
              "$ref": "#/definitions/getSuperhandyReviewSuccess"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        }
      }
    },
    "/home/task-stats": {
      "get": {
        "tags": [
          "Home"
        ],
        "summary": "Get task statistics count",
        "description": "",
        "parameters": [],
        "responses": {
          "200": {
            "description": "取得成功",
            "schema": {
              "$ref": "#/definitions/getTaskStatsSuccess"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        }
      }
    },
    "/home/excellent-helpers": {
      "get": {
        "tags": [
          "Home"
        ],
        "summary": "Get excellent helpers",
        "description": "",
        "parameters": [],
        "responses": {
          "200": {
            "description": "取得成功",
            "schema": {
              "$ref": "#/definitions/getExcellentHelpersSuccess"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        }
      }
    },
    "/general/categories": {
      "get": {
        "tags": [
          "General"
        ],
        "summary": "Get Service Category (including task description template)",
        "description": "",
        "parameters": [],
        "responses": {
          "200": {
            "description": "取得成功",
            "schema": {
              "$ref": "#/definitions/getCategorySuccess"
            }
          },
          "404": {
            "description": "無此路由",
            "schema": {
              "$ref": "#/definitions/Error404"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        }
      }
    },
    "/general/exposure-plan": {
      "get": {
        "tags": [
          "General"
        ],
        "summary": "Get Exposure Plan",
        "description": "",
        "parameters": [],
        "responses": {
          "200": {
            "description": "取得成功",
            "schema": {
              "$ref": "#/definitions/getPlanSuccess"
            }
          },
          "404": {
            "description": "無此路由",
            "schema": {
              "$ref": "#/definitions/Error404"
            }
          },
          "500": {
            "description": "系統錯誤",
            "schema": {
              "$ref": "#/definitions/Error500"
            }
          }
        }
      }
    },
    "/post-task/check-location": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "檢查地址(取得經緯度)",
        "description": "",
        "parameters": [
          {
            "name": "address",
            "in": "query",
            "description": "完整地址",
            "schema": {
              "type": "object",
              "properties": {
                "address": {
                  "type": "string",
                  "example": "台北市信義區市府路45號"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "formatted_address": {
                  "type": "string",
                  "example": "No. 45, City Hall Rd, Xinyi District, Taipei City, Taiwan 110"
                },
                "location": {
                  "type": "object",
                  "properties": {
                    "lat": {
                      "type": "number",
                      "example": 25.0341222
                    },
                    "lng": {
                      "type": "number",
                      "example": 121.5640212
                    }
                  }
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "404": {
            "description": "Not Found",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "查無地址"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        },
        "security": [
          {
            "jwt": []
          }
        ]
      }
    },
    "/post-task/save-draft": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "儲存新草稿",
        "description": "",
        "parameters": [
          {
            "name": "parameter_name",
            "in": "body",
            "description": "任務資料",
            "schema": {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "example": "任務標題"
                },
                "status": {
                  "type": "string",
                  "example": "draft"
                },
                "category": {
                  "type": "string",
                  "example": "家事"
                },
                "description": {
                  "type": "string",
                  "example": "任務描述"
                },
                "salary": {
                  "type": "number",
                  "example": 1000
                },
                "exposurePlan": {
                  "type": "string",
                  "example": "2"
                },
                "imagesUrl": {
                  "type": "array",
                  "example": [
                    "https://example.com/image1.jpg",
                    "https://example.com/mage2.jpg"
                  ],
                  "items": {
                    "type": "string"
                  }
                },
                "contactInfo": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "example": "王小明"
                    },
                    "phone": {
                      "type": "string",
                      "example": "0912345678"
                    },
                    "email": {
                      "type": "string",
                      "example": "ming@gmail.com"
                    }
                  }
                },
                "location": {
                  "type": "object",
                  "properties": {
                    "city": {
                      "type": "string",
                      "example": "台北市"
                    },
                    "dist": {
                      "type": "string",
                      "example": "信義區"
                    },
                    "address": {
                      "type": "string",
                      "example": "台北市信義區市府路45號"
                    },
                    "landmark": {
                      "type": "string",
                      "example": "台北101"
                    },
                    "lng": {
                      "type": "number",
                      "example": 121.5337064
                    },
                    "lat": {
                      "type": "number",
                      "example": 25.0296587
                    }
                  }
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "儲存成功"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "404": {
            "description": "Not Found",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "儲存失敗"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          },
          "500": {
            "description": "Server Error",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string",
                  "example": "伺服器錯誤"
                }
              },
              "xml": {
                "name": "main"
              }
            }
          }
        },
        "security": [
          {
            "jwt": []
          }
        ]
      }
    }
  },
  "definitions": {
    "Success": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "example": "成功訊息"
        }
      }
    },
    "Error400": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "example": "錯誤訊息"
        }
      }
    },
    "Error404": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "example": "外太空也找不到這個頁面"
        }
      }
    },
    "Error500": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "example": "系統錯誤，請稍後再試"
        }
      }
    },
    "Sign": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string",
          "example": "abcde"
        },
        "_id": {
          "type": "string",
          "example": "123456789"
        }
      }
    },
    "RegisterEmailSuccess": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "example": "success"
        },
        "message": {
          "type": "string",
          "example": "請至 Email 查收信件"
        }
      }
    },
    "RegisterEmailError": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "example": "請稍後重試或聯絡管理員"
        }
      }
    },
    "ValidateEmailError": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "example": "信箱驗證失敗"
        }
      }
    },
    "getCategorySuccess": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "example": "success"
        },
        "data": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "example": "到府驅蟲"
              },
              "template": {
                "type": "string",
                "example": "請填寫以下資訊：\n1. 蟲種：\n2. 家居面積：\n3. 服務時間："
              }
            }
          }
        },
        "message": {
          "type": "string",
          "example": "取得成功"
        }
      }
    },
    "getPlanSuccess": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "example": "success"
        },
        "data": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "title": {
                "type": "string",
                "example": "一般曝光"
              },
              "price": {
                "type": "string",
                "example": "20"
              },
              "items": {
                "type": "array",
                "example": [
                  "無理由修改",
                  "極速退點",
                  "刊登時間30天"
                ],
                "items": {
                  "type": "string"
                }
              }
            }
          }
        },
        "message": {
          "type": "string",
          "example": "取得成功"
        }
      }
    },
    "getCompletedCasesSuccess": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "example": "success"
        },
        "data": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "location": {
                "type": "object",
                "properties": {
                  "city": {
                    "type": "string",
                    "example": "台北市"
                  },
                  "dist": {
                    "type": "string",
                    "example": "松山區"
                  },
                  "address": {
                    "type": "string",
                    "example": "復興北路15號"
                  },
                  "landmark": {
                    "type": "string",
                    "example": "歌唱大樓"
                  },
                  "longitude": {
                    "type": "number",
                    "example": 121.53868
                  },
                  "latitude": {
                    "type": "number",
                    "example": 25.02697
                  }
                }
              },
              "_id": {
                "type": "string",
                "example": "644fc95562a7112b1c72bcfd"
              },
              "status": {
                "type": "string",
                "example": "completed"
              },
              "title": {
                "type": "string",
                "example": "陪我家狗玩"
              },
              "salary": {
                "type": "number",
                "example": 300
              },
              "createAt": {
                "type": "string",
                "example": "2023-01-30T04:34:56.000Z"
              },
              "completedAt": {
                "type": "string",
                "example": "2022-02-23T00:19:50.000Z"
              }
            }
          }
        },
        "message": {
          "type": "string",
          "example": "取得成功"
        }
      }
    },
    "getSuperhandyReviewSuccess": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "example": "success"
        },
        "data": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "_id": {
                "type": "string",
                "example": "644fdf6b56c25a7e04b77197"
              },
              "comment": {
                "type": "string",
                "example": "個人物品多 之前透過此平台搜尋到 此清潔整理員工作時都會注意細節 每次需要時依舊還是會想要主動聯繫此清潔整理員"
              },
              "name": {
                "type": "string",
                "example": "翁"
              }
            }
          }
        },
        "message": {
          "type": "string",
          "example": "取得成功"
        }
      }
    },
    "getTaskStatsSuccess": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "example": "success"
        },
        "data": {
          "type": "object",
          "properties": {
            "totalPublished": {
              "type": "number",
              "example": 3
            },
            "totalCompleted": {
              "type": "number",
              "example": 2
            }
          }
        },
        "message": {
          "type": "string",
          "example": "取得成功"
        }
      }
    },
    "getExcellentHelpersSuccess": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "example": "success"
        },
        "data": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "example": "王"
              },
              "avatar": {
                "type": "string",
                "example": "https://i.imgur.com/1234567.jpg"
              },
              "completedTasks": {
                "type": "number",
                "example": 130
              },
              "completionRate": {
                "type": "number",
                "example": 90
              },
              "rating": {
                "type": "object",
                "properties": {
                  "overall": {
                    "type": "number",
                    "example": 4.8
                  },
                  "categories": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string",
                          "example": "排隊代購"
                        },
                        "star": {
                          "type": "number",
                          "example": 4.5
                        },
                        "totalReviews": {
                          "type": "number",
                          "example": 30
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "message": {
          "type": "string",
          "example": "取得成功"
        }
      }
    }
  }
}